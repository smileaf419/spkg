HOMEPAGE="https://mesonbuild.com/"
DESCRIPTION=""
SRC_URI="https://github.com/mesonbuild/meson/releases/download/${PKG_VER}/meson-${PKG_VER}.tar.gz"
LICENSE=""
DEPS=""
BDEPS=""
RDEPS="dev-lang/python dev-python/pip dev-python/wheel"
SLOT=0

src_configure() {
	sed -i 's,license_file,license_files,' setup.cfg
}

src_compile() {
	pip3 wheel -w dist --no-build-isolation --no-deps $PWD
}

src_test() { :; }

src_install() {
	pip3 install --no-index --find-links dist meson
	install -vDm644 data/shell-completions/bash/meson "${D}"/usr/share/bash-completion/completions/meson
	install -vDm644 data/shell-completions/zsh/_meson "${D}"/usr/share/zsh/site-functions/_meson
}
