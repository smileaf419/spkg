HOMEPAGE="https://www.mpfr.org/"
DESCRIPTION="Library for multiple-precision floating-point computations with exact rounding"
LICENSE="LGPLv2.1"
SRC_URI=("https://www.mpfr.org/mpfr-${PKG_VER}/mpfr-${PKG_VER}.tar.xz")
PATCH_LEVEL=9
for p in $(seq 1 $PATCH_LEVEL); do
	[[ $p -lt 10 ]] && p="0$p"
	PATCHES+=("https://www.mpfr.org/mpfr-4.2.0/patch$p => mpfr-$PKG_VER-${p#0}.patch")
done
DEPS="dev-libs/gmp"
BDEPS=""
RDEPS=""
ARCHS="x86 x86_64"
SLOT=0

src_configure() {
	configure_default \
	            --enable-thread-safe
}

src_compile() {
	compile_default
	make html
}

src_install() {
	install_default
	make DESTDIR="${D}" install-html
}

bootstrap() {
	case $PKG_FLAGS in
		pass1) ./configure --host=$HOST_TGT --build=$(../config.guess) --prefix=/tools ;;
		pass2) src_configure ;;
	esac
	compile_default
	install_default
}
