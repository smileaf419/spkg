HOMEPAGE="https://www.mpfr.org/"
DESCRIPTION=""
LICENSE=""
SRC_URI="https://www.mpfr.org/mpfr-${PKG_VER}/mpfr-${PKG_VER}.tar.xz"
DEPS="dev-libs/gmp"
BDEPS=""
RDEPS=""
ARCHS="x86 x86_64"
SLOT=0

src_configure() {
	# Fix a test case based on a bug of old Glibc releases
	sed -e 's/+01,234,567/+1,234,567 /' \
		-e 's/13.10Pd/13Pd/'            \
		-i tests/tsprintf.c
	configure_default \
	            --enable-thread-safe
}

src_compile() {
	compile_default
	make html
}

src_install() {
	install_default
	make DESTDIR="${D}" install-html
}

bootstrap() {
	# Fix a test case based on a bug of old Glibc releases
	sed -e 's/+01,234,567/+1,234,567 /' \
		-e 's/13.10Pd/13Pd/'            \
		-i tests/tsprintf.c
	case $PKG_FLAGS in
		pass1) ./configure --host=$HOST_TGT --build=$(config.guess) --prefix=/tools ;;
		pass2) configure_default ;;
	esac
	compile_default
	install_default
}
